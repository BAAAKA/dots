# set iterm, vscode, system, and wallpaper to match dark or light theme
# code in .zshrc and asscociated files in ~/.dots/theme

if [[ $1 == light ]]
then
    echo "\033]50;SetProfile=light\a"
    sed -i -e 's/set background=dark/set background=light/g' ~/.config/nvim/init.vim
    sed -i -e 's/"workbench.colorTheme": "One Dark Pro (Italic)",/"workbench.colorTheme": "Atom One Light",/g' ~/Library/Application\ Support/Code/User/settings.json
    sed -i -e 's/"workbench.colorTheme": "Palenight Operator",/"workbench.colorTheme": "Atom One Light",/g' ~/Library/Application\ Support/Code/User/settings.json
    osascript ~/.dots/theme/mode.scpt false
    osascript ~/.dots/theme/wallpaper.scpt 2
    echo light > ~/.dots/theme/currentTheme
    
elif [[ $1 == dark ]]
then
    echo "\033]50;SetProfile=dark\a"
    sed -i -e 's/set background=light/set background=dark/g' ~/.config/nvim/init.vim
    sed -i -e 's/"workbench.colorTheme": "Atom One Light",/"workbench.colorTheme": "One Dark Pro (Italic)",/g' ~/Library/Application\ Support/Code/User/settings.json
    sed -i -e 's/"workbench.colorTheme": "Palenight Operator",/"workbench.colorTheme": "One Dark Pro (Italic)",/g' ~/Library/Application\ Support/Code/User/settings.json
    osascript ~/.dots/theme/mode.scpt true
    osascript ~/.dots/theme/wallpaper.scpt 1
    echo dark > ~/.dots/theme/currentTheme
elif [[ $1 == palenight ]]
then
    echo "\033]50;SetProfile=palenight\a"
    sed -i -e 's/set background=light/set background=dark/g' ~/.config/nvim/init.vim
    sed -i -e 's/"workbench.colorTheme": "Atom One Light",/"workbench.colorTheme": "Palenight Operator",/g' ~/Library/Application\ Support/Code/User/settings.json
    sed -i -e 's/"workbench.colorTheme": "One Dark Pro (Italic)",/"workbench.colorTheme": "Palenight Operator",/g' ~/Library/Application\ Support/Code/User/settings.json
    osascript ~/.dots/theme/mode.scpt true
    osascript ~/.dots/theme/wallpaper.scpt 1
    echo palenight > ~/.dots/theme/currentTheme

elif [[ $1 == wallpaper ]]
then
    osascript ~/.dots/theme/wallpaper.scpt $2

else
	echo "invalid: not 'dark', 'light', or 'palenight'"
	exit -1
fi
